"use strict"
define("wave/app",["exports","wave/resolver","ember-load-initializers","wave/config/environment"],function(e,t,o,r){Object.defineProperty(e,"__esModule",{value:!0})
var i=Ember.Application.extend({modulePrefix:r.default.modulePrefix,podModulePrefix:r.default.podModulePrefix,Resolver:t.default});(0,o.default)(i,r.default.modulePrefix),e.default=i}),define("wave/components/peaks-display",["exports","peaks","wave/config/environment"],function(e,t,o){Object.defineProperty(e,"__esModule",{value:!0})
e.default=Ember.Component.extend({classNames:["peaks-display"],init:function(){this._super.apply(this,arguments)
var e=new AudioContext
this.set("audioContext",e)},zoomIn:function(){this.get("peaks").zoom.zoomIn()},zoomOut:function(){this.get("peaks").zoom.zoomOut()},addSegment:function(){this.get("peaks").segments.add({startTime:2.43,endTime:2.835,editable:!0})},removeAllSegments:function(){this.get("peaks").segments.removeAll()},playSegment:function(){this.get("peaks").player.playSegment(this.getSegment())},getSegment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.get("peaks").segments.getSegments()
if(t.length)return t[e]},extractSegment:function(){},addPlayer:function(){var e=new Audio
e.src=o.default.rootURL+"dub.wav",e.controls=!0,document.body.getElementsByClassName("player-container")[0].appendChild(e)
var t=this.get("audioContext")
return window.addEventListener("load",function(){t.createMediaElementSource(e).connect(t.destination)},!1),this.set("mediaElement",e),e},didInsertElement:function(){this._super.apply(this,arguments)
var e=this.addPlayer(),o=t.default.init({container:this.$("#peaks-container")[0],mediaElement:e,audioContext:this.get("audioContext"),zoomLevels:[2,4,8,16,32,64,128,256,512,1024,2048],keyboard:!0,template:['<div class="waveform">','<div class="overview-container"></div>','<div class="zoom-container"></div>',"</div>"].join("")})
o.zoom.setZoom(6),o.player.playSegment=function(e){var t=this
clearTimeout(t._interval),t._interval=null,t.seek(e.startTime),t._mediaElement.play(),t._interval=setInterval(function(){(t.getCurrentTime()>=e.endTime||t._mediaElement.paused)&&(clearTimeout(t._interval),t._interval=null,t._mediaElement.pause())},1)}.bind(o.player),o.on("peaks.ready",function(){}),this.set("peaks",o)}})}),define("wave/components/sample-editor-view",["exports","wave/lib/waveform-object","wave/lib/ruler-object","wave/lib/line-marker","wave/lib/loop-marker"],function(e,t,o,r,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"canvas",classNames:["sample-editor-view"],attributeBindings:["width","height"],hZoom:1,vZoom:2,offset:0,background:"#ddd",color:"#222",selectColor:"#ddd",selectBackground:"#222",width:640,height:320,channel:0,resolution:1,startPosition:42.1,uiZoomStickiness:.1,duration:"auto",visible:!0,loop:!0,loopStart:0,loopEnd:1,selectStart:0,selectEnd:0,quantize:1e-4,mouseDown:!1,doZoom:!1,lastY:0,lastMousePos:null,startXTime:0,pixelRatio:Ember.computed("width","height",function(){var e=this.element.getBoundingClientRect()
return{x:this.get("width")/e.width,y:this.get("height")/e.height}}),_duration:Ember.computed("duration","buffer.duration",function(){var e=this.get("duration")
return"auto"===e?this.get("buffer")?this.get("buffer.duration"):0:e}),displayDuration:Ember.computed("_duration","hZoom",function(){return this.get("_duration")/this.get("hZoom")}),propsChanged:Ember.observer("width","height","lastMousePos","loopStart","loopEnd","selectStart","selectEnd","offset","hZoom","zoomMarker.visible",function(){this._render()}),init:function(){this._super.apply(this,arguments),this.set("lastMousePos",{x:0,y:0})
var e=t.default.create({editor:this}),n=o.default.create({editor:this}),a=r.default.create({editor:this}),s=r.default.create({editor:this}),l=r.default.create({editor:this}),u=i.default.create({editor:this}),p=r.default.create({editor:this,width:this.get("width")/64})
this.setProperties({waveform:e,ruler:n,startMarker:p,zoomMarker:a,loopLengthMarker:u,loopStartMarker:s,loopEndMarker:l})},_render:function(){if(this.get("buffer")){var e=this.get("context")
e.drawImage(this.get("waveform.renderCanvas"),0,0),this.get("zoomMarker.visible")&&this.get("zoomMarker.position")&&e.drawImage(this.get("zoomMarker.renderCanvas"),this.get("zoomMarker.position"),0),e.drawImage(this.get("ruler.renderCanvas"),0,0),this.set("loopLengthMarker.width",this._timeToPixel(this.get("loopEnd"))-this._timeToPixel(this.get("loopStart")))
var t=this._timeToPixel(this.get("loopStart"))
this.get("loopLengthMarker.width")>0&&e.drawImage(this.get("loopLengthMarker.renderCanvas"),t,0),e.drawImage(this.get("loopStartMarker.renderCanvas"),t,0),e.drawImage(this.get("loopEndMarker.renderCanvas"),this._timeToPixel(this.get("loopEnd"))-this.get("loopEndMarker.width"),0)}},_timeToPixel:function(e){if(0===(e-=this.get("offset"))||0===this.get("displayDuration"))return 1
var t=e/this.get("displayDuration")*this.get("width")
return Math.max(1,Math.round(t))},_pixelToTime:function(e){return e/this.get("width")*this.get("displayDuration")},_getLoopRect:function(){var e=this.getProperties("loopStart","loopEnd","height"),t=e.loopStart,o=e.loopEnd
e.height
return{x1:this._timeToPixel(t),y1:0,x2:this._timeToPixel(o),y2:20}},_hitTest:function(e){if(e.y<this.get("ruler.height")){if(this.get("loop")){var t=this._getLoopRect()
if(e.y>=t.y1&&e.y<t.y2){if(Math.abs(e.x-t.x1)<5)return this.get("loopStartMarker")
if(Math.abs(e.x-t.x2)<5)return this.get("loopEndMarker")
if(e.x>=t.x1&&e.x<t.x2)return this.get("loopLengthMarker")}}if(e.x)return this.ruler}return this.get("waveForm")},_updateCursor:function(e,t){e===this.get("ruler")?this.element.style.cursor="auto":e===this.get("loopStartMarker")?this.element.style.cursor="e-resize":e===this.get("loopEndMarker")?this.element.style.cursor="w-resize":e===this.get("loopLengthMarker")?this.element.style.cursor="move":e===this.get("waveForm")&&t.altKey?this.element.style.cursor="crosshair":this.element.style.cursor="auto"},toRelativeMovement:function(e){e=e.originalEvent||e
var t=this.element.getBoundingClientRect(),o=this.get("pixelRatio")
return{rect:t,x:(e.pageX-t.left)*o.x,y:(e.pageY-t.top)*o.y,movementX:e.movementX?e.movementX*o.x:0,movementY:e.movementY?e.movementY*o.y:0}},quantizePosition:function(e){var t=e.x,o=e.y
if(!this.get("quantize"))return{x:t,y:o}
var r=this.get("offset")/this.get("displayDuration")*this.get("width"),i=this.get("quantize")/this.get("displayDuration")*this.get("width")
return t+=r,t=Math.round(t/i)*i,{x:t-=r,y:o}},updateSelection:function(e,t){e=Math.max(0,e),t=Math.min(this.get("_duration"),t),this.set("selectStart",e),this.set("selectEnd",t)},updateLoopPos:function(e,t){var o=this.get("_duration")
if(e<0){var r=Math.abs(e)
t=Math.min(o,t+r),e+=r}if(t>o){var i=o-t
e=Math.max(0,e+i),t+=i}e>t&&(e=t),e>=0&&t<=o&&this.setProperties({loopStart:e,loopEnd:t})},updateStartPos:function(e){var t=e/this.element.width*this.get("_duration")/this.get("hZoom")+this.get("offset")
this.set("startPosition",t)},_setupUI:function(){this.$().on("mousedown",this._mouseDown.bind(this)),$("body").on("mouseup",this._mouseUp.bind(this)),$("body").on("mousemove",this._mouseMove.bind(this))},_mouseDown:function(e){this.set("mouseDown",!0),this.set("lastY",null),this.set("zoomThresh",0),this.set("doZoom",!1)
var t=this.toRelativeMovement(e)
this.set("canvasTarget",this._hitTest(t))
var o=this.get("canvasTarget")
this._updateCursor(o,e),o===this.get("waveForm")&&(e.altKey||(this.set("doZoom",!0),this.set("zoomMarker.position",t.x),this.set("zoomMarker.visible",!0),this.element.requestPointerLock()))
var r=this.get("doZoom")
r||(t=this.quantizePosition(t))
var i=this._pixelToTime(t.x)+this.get("offset")
this.set("startXTime",i),!r&&this.set("selectEnd",this.set("selectStart",i)),this.set("lastMousePos",t)},_mouseUp:function(){this.set("mouseDown",!1),this.get("doZoom")&&(this.set("zoomMarker.visible",!1),document.exitPointerLock(),this.set("doZoom",!1))},_mouseMove:function(e){if(this.get("mouseDown")){var t=this.get("doZoom"),o=this.get("canvasTarget"),r=this.toRelativeMovement(e),i=r.x,n=r.y,a=r.movementX,s=r.movementY,l=r.rect,u={x:i,y:n}
t||(u.x=Math.max(0,Math.min(this.get("width"),u.x)),u=this.quantizePosition(u),o===this.ruler&&this.updateStartPos(u.x))
var p=(t&&void 0!==a?a:u.x-this.get("lastMousePos.x"))/l.width,h=(t&&void 0!==s?s:u.y-this.get("lastMousePos.y"))/l.height,d=this._pixelToTime(u.x)+Number(this.getWithDefault("offset",0)),f=this._pixelToTime(p)*this.get("width")/this.get("pixelRatio.x")
if(Object.assign(this.get("lastMousePos"),u),t){null===this.get("lastY")&&this.set("lastY",u.y),this.set("lastY",u.y),this.incrementProperty("zoomThresh",Math.abs(h))
var c=this.get("hZoom"),m=Math.max(1,c+h*c)
if(this.get("zoomThresh")>this.get("uiZoomStickiness")){var v=m-c
if(0!==v&&m>=.5){var g=v/c,b=u.x/(l.width*this.get("pixelRatio.x"))
this.set("hZoom",m),this.incrementProperty("offset",g*b*this.get("displayDuration"))}}this.decrementProperty("offset",10*p/m)}else if(o===this.get("waveForm")){var y=this.get("startXTime")
d<y?this.updateSelection(this.get("selectStart")+f,y):this.updateSelection(y,this.get("selectEnd")+f)}else o===this.ruler?u.x>=0&&u.x<l.width?this.updateStartPos(u.x):u.x<0?this.set("offset",Math.max(0,this.get("offset")-Math.abs(.1*u.x))):this.set("offset",Math.min(this.duration,this.get("offset")+.1*(u.x-l.width))):o===this.get("loopLengthMarker")?this.updateLoopPos(this.get("loopStart")+f,this.get("loopEnd")+f):o===this.get("loopStartMarker")?d<=this.get("loopEnd")?this.updateLoopPos(this.get("loopStart")+f,this.get("loopEnd")):this.updateLoopPos(this.get("loopEnd"),this.get("loopEnd")):o===this.get("loopEndMarker")&&(d>=this.get("loopStart")?this.updateLoopPos(this.get("loopStart"),this.get("loopEnd")+f):this.updateLoopPos(this.get("loopStart"),this.get("loopStart")))}else this._updateCursor(this._hitTest(this.toRelativeMovement(e)),e)},didInsertElement:function(){this._super.apply(this,arguments),this._setupUI()
var e=this.element,t=e.getContext("2d")
t.imageSmoothingEnabled=!1,this.set("canvas",e),this.set("context",t),this._render()},willDestroyElement:function(){this._super.apply(this,arguments),this.$().off("mousedown"),$("body").off("mouseup").off("mousemove")}})}),define("wave/components/sample-editor",["exports","wave/lib/SampleEditorView","wave/config/environment"],function(e,t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({loopLength:Ember.computed("editor.props.{loopStart,loopEnd}",{get:function(){var e=Number(this.get("editor.props.loopStart")||0)
return Number(this.get("editor.props.loopEnd")||0)-e},set:function(e,t){var o=Number(this.get("editor.props.loopStart")||0)
return this.set("editor.props.loopEnd",o+Number(t)),t}}),init:function(){this._super.apply(this,arguments)
var e=new(window.AudioContext||window.webkitAudioContext)
this.set("audioContext",e)},play:function(){this.get("source")&&this.stop()
var e=this.getProperties("audioContext","buffer"),t=e.audioContext,o=e.buffer,r=t.createBufferSource(),i=this.get("editor")
this.set("source",r),r.buffer=o,r.connect(t.destination),r.start(t.currentTime,i.props.loopStart,i.props.loopEnd-i.props.loopStart)},stop:function(){var e=this.get("source")
e&&e.stop(),this.set("source",null)},getBuffer:function(){var e=this.get("audioContext")
return new Promise(function(t,r){fetch(o.default.rootURL+"dub.wav").then(function(e){return e.arrayBuffer()}).then(function(o){e.decodeAudioData(o,function(e){return t(e)},r)})})},initEditor:function(){var e,o=(e=regeneratorRuntime.mark(function e(){var o,r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBuffer()
case 2:o=e.sent,this.set("buffer",o),r=new t.default({background:"#eee",width:1280,height:640,highRes:!0}),this.set("editor",r),r.buffer=o,this.$().append(r.canvas)
case 8:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments)
return new Promise(function(e,o){return function r(i,n){try{var a=t[i](n),s=a.value}catch(e){return void o(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})
e(s)}("next")})})
return function(){return o.apply(this,arguments)}}(),didInsertElement:function(){this._super.apply(this,arguments),this.initEditor()}})}),define("wave/components/waveform-display",["exports","waveform-data","webaudio-builder","wave/config/environment"],function(e,t,o,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"canvas",attributeBindings:["height","width"],height:200,width:1e3,initWaveform:function(){var e=this,i=new AudioContext
fetch(r.default.rootURL+"dub.wav").then(function(e){return e.arrayBuffer()}).then(function(r){(0,o.default)(i,r,function(o,r){if(o)throw o
e.set("waveform",r),e.draw(new t.default(r.adapter.data.buffer,t.default.adapters.arraybuffer))})})},zoomWidth:1,zoomChanged:Ember.observer("zoomWidth",function(){var e=this.get("waveform")
this.draw(new t.default(e.adapter.data.buffer,t.default.adapters.arraybuffer))}),draw:function(e){var t,o=Number(this.get("zoomWidth")),r=e.resample({scale:e.adapter.scale*o}),i=this.element,n=(t=i.height,function(e){return t-(e+128)*t/256}),a=i.getContext("2d")
a.clearRect(0,0,i.width,i.height),a.beginPath(),r.min.forEach(function(e,t){return a.lineTo(t+.5,n(e)+.5)}),r.max.reverse().forEach(function(e,t){a.lineTo(r.offset_length-t+.5,n(e)+.5)}),a.closePath(),a.stroke()},didInsertElement:function(){this._super.apply(this,arguments),this.initWaveform()}})}),define("wave/controllers/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({init:function(){this._super.apply(this,arguments),this.set("zoomWidth",1)},zoomIn:function(){this.incrementProperty("zoomWidth")}})}),define("wave/controllers/editor",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({audio:Ember.inject.service(),audioContext:Ember.computed.alias("audio.audioContext"),buffer:Ember.computed.alias("model"),loopStart:2,loopEnd:8,hZoom:1,_loopStart:Ember.computed("loopStart",{get:function(){return Number(this.get("loopStart")||0)},set:function(e,t){return this.set("loopStart",Number(t||0))}}),_loopEnd:Ember.computed("loopStart","loopEnd",{get:function(){return Number(this.get("loopEnd")||0)},set:function(e,t){return this.set("loopEnd",Number(t))}}),loopLength:Ember.computed("loopStart","loopEnd",{get:function(){var e=this.getProperties("loopStart","loopEnd"),t=e.loopStart
return e.loopEnd-t},set:function(e,t){var o=Number(this.get("loopStart")||0)
return this.set("loopEnd",o+Number(t)),t}}),play:function(){this.get("source")&&this.stop()
var e=this.getProperties("audioContext","buffer"),t=e.audioContext,o=e.buffer,r=t.createBufferSource()
this.set("source",r),r.buffer=o,r.connect(t.destination)
var i=this.getProperties("loopStart","loopEnd"),n=i.loopStart,a=i.loopEnd
r.start(t.currentTime,n,a-n)},stop:function(){var e=this.get("source")
e&&e.stop(),this.set("source",null)}})}),define("wave/helpers/app-version",["exports","wave/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,o){function r(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.default.APP.version,n=r.versionOnly||r.hideSha,a=r.shaOnly||r.hideVersion,s=null
return n&&(r.showExtended&&(s=i.match(o.versionExtendedRegExp)),s||(s=i.match(o.versionRegExp))),a&&(s=i.match(o.shaRegExp)),s?s[0]:i}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=r,e.default=Ember.Helper.helper(r)}),define("wave/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("wave/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("wave/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","wave/config/environment"],function(e,t,o){Object.defineProperty(e,"__esModule",{value:!0})
var r=void 0,i=void 0
o.default.APP&&(r=o.default.APP.name,i=o.default.APP.version),e.default={name:"App Version",initialize:(0,t.default)(r,i)}}),define("wave/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("wave/initializers/ember-data",["exports","ember-data/setup-container","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("wave/initializers/export-application-global",["exports","wave/config/environment"],function(e,t){function o(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var o
if("undefined"!=typeof window)o=window
else if("undefined"!=typeof global)o=global
else{if("undefined"==typeof self)return
o=self}var r,i=t.default.exportApplicationGlobal
r="string"==typeof i?i:Ember.String.classify(t.default.modulePrefix),o[r]||(o[r]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete o[r]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=o,e.default={name:"export-application-global",initialize:o}}),define("wave/instance-initializers/ember-data",["exports","ember-data/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("wave/lib/CanvasUI",["exports","wave/lib/Props"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var o=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),r={width:640,height:320,hZoom:1,visible:!0,duration:"auto",color:"#fff",background:"#333",buffer:null},i=function(){function e(o,i){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.props=new t.default(r,o,i),this.props.$on("change",function(e){n.dirty=!0}),this.dirty=!0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1}return o(e,[{key:"renderIfDirty",value:function(){return this.dirty?(this.clear(),this.props.visible?this.render():this):this}},{key:"clear",value:function(){this.canvas.width=this.props.width,this.canvas.height=this.props.height}},{key:"duration",get:function(){return"auto"===this.props.duration?this.props.buffer?this.props.buffer.duration:0:this.props.duration}},{key:"displayDuration",get:function(){return this.duration/this.props.hZoom}}]),e}()
e.default=i}),define("wave/lib/LineMarker",["exports","wave/lib/CanvasUI"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var o=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()
var r={background:"#999",color:"#222",width:10,dir:1},i=function(e){function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t.default),o(i,[{key:"render",value:function(){var e=this.ctx,t=this.props.width,o=this.props.height
e.fillStyle=this.props.background,e.strokeStyle=this.props.color,e.beginPath()
var r=o/64,i=2*r
return 1===this.props.dir?(e.lineTo(t,r),e.lineTo(0,i),e.lineTo(0,0),e.lineTo(t,r),e.fill(),e.stroke(),e.strokeRect(0,0,1,o)):(e.moveTo(t,0),e.lineTo(0,r),e.lineTo(t,i),e.lineTo(t,0),e.lineTo(0,r),e.fill(),e.stroke(),e.strokeRect(t,0,1,o)),this}}]),i}()
e.default=i}),define("wave/lib/LoopMarker",["exports","wave/lib/CanvasUI"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var o=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()
var r={height:10,color:"#222"},i=function(e){function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t.default),o(i,[{key:"render",value:function(){var e=this.ctx,t=this.props.width,o=this.props.height
return e.fillStyle=this.props.color,e.fillRect(0,0,t,o),this}}]),i}()
e.default=i}),define("wave/lib/Props",["exports","wave/lib/eventMixin"],function(e,t){function o(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t]
return o}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0})
var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=function(){function e(){for(var t=this,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)
var n=(r=r.filter(function(e){return!!e})).reduce(function(e,t){return Object.assign(e,t)},{})
Object.keys(n).forEach(function(e){Object.defineProperty(t,e,{get:function(){return n[e]},set:function(t){var o=n[e]
n[e]=t,this.$triggerDeferred("defered_change"),this.$trigger("change",e,t),this.$trigger("change:"+e,t,o)}})}),this.$privateProps=n,this.$keys=Object.keys(n)}return r(e,[{key:"$observe",value:function(e,t){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this
if(Array.isArray(e))return e.forEach(function(e){return o.$observe(e,t,r)}),this
if(void 0===this.$privateProps[e])throw new Error("Can' observe undefined prop "+e)
return t.call(r,this.$privateProps[e]),this.$on("change:"+e,t,r),this}},{key:"$unobserve",value:function(e,t,o){var r=this
return Array.isArray(e)?(e.forEach(function(e){return r.$unobserve(e,t,o)}),this):(this.$off("change:"+e,t,o),this)}},{key:"$bind",value:function(e){for(var t=this,o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i]
return r.forEach(function(o){t.$observe(o,function(t){e[o]=t})}),this}},{key:"$unbind",value:function(e){for(var t=this,o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i]
return r&&r.length?r.forEach(function(o){t.$unobserve(o,null,e)}):this.$off(null,null,e),this}},{key:"$map",value:function(e,t){var o=this
return Object.keys(t).forEach(function(r){e.$observe(r,function(e){o[r]=t[r](e)})}),this}},{key:"$link",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
return t=t||Object.keys(this.$privateProps).filter(function(t){return void 0!==e.$privateProps[t]}),e.$bind.apply(e,[this].concat(o(t))),this}},{key:"$unlink",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
return t=t||Object.keys(this.$privateProps).filter(function(t){return void 0!==e.$privateProps[t]}),e.$unbind.apply(e,[this].concat(o(Object.keys(this.$privateProps)))),this}}]),e}()
Object.assign(i.prototype,t.default),e.default=i}),define("wave/lib/Ruler",["exports","wave/lib/CanvasUI"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var o=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()
var r={vZoom:1,offset:0,background:"#AAA",color:"#222",interval:"auto",unit:"s",duration:"auto",quantize:0,height:40},i=function(e){function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t.default),o(i,[{key:"render",value:function(){var e=this.ctx,t=this.props.width,o=this.props.height
e.fillStyle=this.props.background,e.fillRect(0,0,t,o),e.strokeStyle=e.fillStyle=this.props.color,e.lineWidth=.5
var r=this.displayDuration,i=r/t,n=this.props.interval
"auto"===n&&(n=this.quantizeRuler(r)),n=Math.max(.001,n)
for(var a=Math.max(2,Math.min(3,Math.round(1/n))),s=1/i*n,l=t/s,u=-this.props.offset/n%5*s,p=this.props.offset,h=0;h<l+5;h++){var d=h%5==0
if(e.beginPath(),d?(e.moveTo(u,0),e.lineTo(u,o)):(e.moveTo(u,o),e.lineTo(u,.63*o)),e.stroke(),d){var f=this.props.width/71
e.font=f+"px Arial",e.fillText((p+u/s*n).toFixed(a)+this.props.unit,u+5,f)}u+=s}return this}},{key:"quantizeRuler",value:function(e){var t=this.props.width/e,o=5/t,r=-Math.floor(Math.log(o)/Math.log(10)+1),i=Math.pow(10,r),n=void 0
if(this.props.quantize){for(n=this.props.quantize;n*t<20;)n+=this.props.quantize
for(;n*t>60;)n/=5}else{n=[1,2,5][Math.round(o*i*2)]/i}return n}}]),i}()
e.default=i}),define("wave/lib/SampleEditorView",["exports","wave/lib/CanvasUI","wave/lib/Waveform","wave/lib/Ruler","wave/lib/LineMarker","wave/lib/LoopMarker"],function(e,t,o,r,i,n){Object.defineProperty(e,"__esModule",{value:!0})
var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()
var s={hZoom:1,vZoom:2,offset:0,background:"#ddd",color:"#222",selectColor:"#ddd",selectBackground:"#222",width:640,height:320,channel:0,resolution:1,startPosition:42.1,uiZoomStickiness:.1,duration:"auto",visible:!0,loop:!0,loopStart:1,loopEnd:2,selectStart:0,selectEnd:0,quantize:1e-4,buffer:null},l=function(e){function l(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l)
var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,s,e))
return t.waveForm=new o.default({}),t.ruler=new r.default({}),t.startMarker=new i.default({}),t.zoomMarker=new i.default({visible:!1}),t.loopLengthMarker=new n.default({visible:!0}),t.loopStartMarker=new i.default({visible:!0}),t.loopEndMarker=new i.default({dir:-1,visible:!0}),t.waveForm.props.$link(t.props),t.ruler.props.$link(t.props,["hZoom","width","offset","quantize","buffer"]).$map(t.props,{height:function(e){return e/16}}),t.zoomMarker.props.$link(t.props,["height"]),t.loopEndMarker.props.$link(t.props,["height"]).$map(t.props,{width:function(e){return e/64}}),t.loopStartMarker.props.$link(t.props,["height"]).$map(t.props,{width:function(e){return e/64}}),t.loopLengthMarker.props.$map(t.props,{height:function(e){return e/32}}),t.startMarker.props.$link(t.props,["height"]).$map(t.props,{width:function(e){return e/64}}),t.render=t.render.bind(t),t._setupUI(),t.props.$on("defered_change",t.renderIfDirty,t),t.zoomMarker.props.$observe("visible",t.renderIfDirty,t),t.canvas.classList.add("SampleEditorView"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,t.default),a(l,[{key:"render",value:function(){var e=this.ctx
e.drawImage(this.waveForm.renderIfDirty().canvas,0,0),e.drawImage(this.zoomMarker.renderIfDirty().canvas,this.zoomMarker.position,0),e.drawImage(this.ruler.renderIfDirty().canvas,0,0),e.drawImage(this.startMarker.renderIfDirty().canvas,this._timeToPixel(this.props.startPosition),10),this.loopLengthMarker.props.width=this._timeToPixel(this.props.loopEnd)-this._timeToPixel(this.props.loopStart),this.loopLengthMarker.props.width>0&&e.drawImage(this.loopLengthMarker.renderIfDirty().canvas,this._timeToPixel(this.props.loopStart),20),e.drawImage(this.loopStartMarker.renderIfDirty().canvas,this._timeToPixel(this.props.loopStart),20),e.drawImage(this.loopEndMarker.renderIfDirty().canvas,this._timeToPixel(this.props.loopEnd)-this.loopEndMarker.props.width,20)}},{key:"_timeToPixel",value:function(e){if(0===(e-=this.props.offset)||0===this.displayDuration)return 1
var t=e/this.displayDuration*this.props.width
return Math.max(1,Math.round(t))}},{key:"_pixelToTime",value:function(e){return e/this.props.width*this.displayDuration}},{key:"_getLoopRect",value:function(){return{x1:this._timeToPixel(this.props.loopStart),y1:20,x2:this._timeToPixel(this.props.loopEnd),y2:this.props.height-20}}},{key:"_hitTest",value:function(e){if(e.y<this.ruler.props.height){if(this.props.loop){var t=this._getLoopRect()
if(e.y>=t.y1&&e.y<t.y2){if(Math.abs(e.x-t.x1)<5)return this.loopStartMarker
if(Math.abs(e.x-t.x2)<5)return this.loopEndMarker
if(e.x>=t.x1&&e.x<t.x2)return this.loopLengthMarker}}if(e.x)return this.ruler}return this.waveForm}},{key:"_updateCursor",value:function(e,t){e===this.ruler?this.canvas.style.cursor="pointer":e===this.loopStartMarker?this.canvas.style.cursor="e-resize":e===this.loopEndMarker?this.canvas.style.cursor="w-resize":e===this.loopLengthMarker?this.canvas.style.cursor="move":e===this.waveForm&&t.altKey?this.canvas.style.cursor="zoom-in":this.canvas.style.cursor="auto"}},{key:"_setupUI",value:function(){var e=this,t=!1,o=0,r=0,i=null,n=!1,a={x:0,y:0},s=0,l=function(t){var o=e.canvas.getBoundingClientRect(),r=e.pixelRatio
return{rect:o,x:(t.pageX-o.left)*r.x,y:(t.pageY-o.top)*r.y,movementX:t.movementX?t.movementX*r.x:0,movementY:t.movementY?t.movementY*r.y:0}},u=function(t){var o=t.x,r=t.y
if(!e.props.quantize)return{x:o,y:r}
var i=e.props.offset/e.displayDuration*e.props.width,n=e.props.quantize/e.displayDuration*e.props.width
return o+=i,o=Math.round(o/n)*n,{x:o-=i,y:r}}
this.canvas.addEventListener("mousedown",function(p){t=!0,o=null,r=0,n=!1
var h=l(p)
i=e._hitTest(h),e._updateCursor(i,p),i===e.waveForm&&p.altKey&&(n=!0,e.zoomMarker.position=h.x,e.zoomMarker.props.visible=!0,e.canvas.requestPointerLock()),n||(h=u(h)),s=e._pixelToTime(h.x)+e.props.offset,!n&&(e.props.selectEnd=e.props.selectStart=s),a=h}),document.addEventListener("mouseup",function(){t=!1,n&&(e.zoomMarker.props.visible=!1,document.exitPointerLock(),n=!1)}),document.addEventListener("mousemove",function(p){if(t){var h=l(p),d=h.x,f=h.y,c=h.movementX,m=h.movementY,v=h.rect,g={x:d,y:f}
n||(g.x=Math.max(0,Math.min(e.props.width,g.x)),g=u(g),i===e.ruler&&e.updateStartPos(g.x))
var b=(n&&void 0!==c?c:g.x-a.x)/v.width,y=(n&&void 0!==m?m:g.y-a.y)/v.height,w=e._pixelToTime(g.x)+e.props.offset,x=e._pixelToTime(b)*e.props.width/e.pixelRatio.x
if(Object.assign(a,g),n){null===o&&(o=g.y),o=g.y,r+=Math.abs(y)
var _=Math.max(1,e.props.hZoom+y*e.props.hZoom)
if(r>e.props.uiZoomStickiness){var k=_-e.props.hZoom
if(0!==k&&_>=.5){var M=k/e.props.hZoom,E=g.x/(v.width*e.pixelRatio.x)
e.props.hZoom=_,e.offset+=M*E*e.displayDuration}}e.offset-=10*b/_}else i===e.waveForm?w<s?e.updateSelection(e.props.selectStart+x,s):e.updateSelection(s,e.props.selectEnd+x):i===e.ruler?g.x>=0&&g.x<v.width?e.updateStartPos(g.x):g.x<0?e.offset=Math.max(0,e.props.offset-Math.abs(.1*g.x)):e.offset=Math.min(e.duration,e.props.offset+.1*(g.x-v.width)):i===e.loopLengthMarker?e.updateLoopPos(e.props.loopStart+x,e.props.loopEnd+x):i===e.loopStartMarker?w<=e.props.loopEnd?e.updateLoopPos(e.props.loopStart+x,e.props.loopEnd):e.updateLoopPos(e.props.loopEnd,e.props.loopEnd):i===e.loopEndMarker&&(w>=e.props.loopStart?e.updateLoopPos(e.props.loopStart,e.props.loopEnd+x):e.updateLoopPos(e.props.loopStart,e.props.loopStart))}else e._updateCursor(e._hitTest(l(p)),p)})}},{key:"updateSelection",value:function(e,t){e=Math.max(0,e),t=Math.min(this.duration,t),this.props.selectStart=e,this.props.selectEnd=t}},{key:"updateLoopPos",value:function(e,t){if(e<0){var o=Math.abs(e)
t=Math.min(this.duration,t+o),e+=o}if(t>this.duration){var r=this.duration-t
e=Math.max(0,e+r),t+=r}e>t&&(e=t),e>=0&&t<=this.duration&&(this.props.loopStart=e,this.props.loopEnd=t)}},{key:"updateStartPos",value:function(e){var t=e/this.canvas.width*this.duration/this.props.hZoom+this.props.offset
this.props.startPosition=t}},{key:"offset",get:function(){return this.props.offset},set:function(e){this.props.offset=Math.max(0,Math.min(this.duration-this.displayDuration,e))}},{key:"buffer",get:function(){return this.props.buffer},set:function(e){this.props.buffer=e}},{key:"pixelRatio",get:function(){var e=this.canvas.getBoundingClientRect()
return{x:this.props.width/e.width,y:this.props.height/e.height}}}]),l}()
e.default=l}),define("wave/lib/Waveform",["exports","wave/lib/CanvasUI"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var o=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()
var r={vZoom:1,offset:0,background:"#ddd",color:"#222",selectColor:"#ddd",selectBackground:"#222",width:640,height:320,selectStart:0,selectEnd:0,channel:0,resolution:1}
function i(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4]
arguments[5]
r=Math.max(1,r),o=Math.min(e.length,o),o=Math.min(t+100,o)
for(var n=0,a=t;a<o;a+=r)n+=i?Math.abs(e[a]):e[a]
return n/(o-t)*r}var n=function(e){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t.default),o(n,[{key:"render",value:function(){var e=this,t=this.props.buffer
if(!t)return this
var o=this.props.width,r=this.props.height,n=this.ctx
n.fillStyle=this.props.background,n.fillRect(0,0,o,r)
var a=t.getChannelData(this.props.channel),s=a.length/this.props.hZoom,l=Math.min(o/this.props.resolution,s),u=s/l,p=o/l,h=r/2,d=this.props.offset*t.sampleRate
n.fillStyle=this.props.color
var f=u>p
n.beginPath(),n.moveTo(0,h),n.lineTo(o,h),n.stroke(),n.moveTo(0,h)
var c=function(t,o,s,c){t=Math.max(0,Math.min(t,l)),o=Math.max(0,Math.min(o,l))
var m=0,v=[]
n.beginPath()
var g=t*p
if(c){var b=(o-t)*p
n.fillStyle=c,n.fillRect(g,0,b,r)}for(var y=t;y<o;y++){var w=Math.floor((y+1)*u+d)
if(f){var x=w>=0?i(a,m,w,1,!0):0
if(x>=0){var _=x*e.props.vZoom*h
y===t&&n.moveTo(g,h-_),n.lineTo(g,h-_),v.push(g,_)}}else{var k=(w>=0?i(a,m,w,1,!1):0)*e.props.vZoom*h
y===t&&n.moveTo(0,h-k),n.lineTo(g,h-k)}g+=p,m=w}if(f){for(var M=v.length-1;M>0;M-=2){var E=v[M-1],P=v[M]
n.lineTo(E,h+P)}n.fillStyle=s,n.fill()}else n.strokeStyle=s,n.stroke()}
if(this.props.selectStart!==this.props.selectEnd){var m=this.duration/this.props.hZoom/l,v=this.props.selectStart-this.props.offset,g=Math.floor(v/m),b=this.props.selectEnd-this.props.offset,y=Math.floor(b/m)
y>0&&g<l?(g>0&&c(0,g,this.props.color,this.props.background),c(Math.max(0,g),Math.min(l,y),this.props.selectColor,this.props.selectBackground),y<l&&c(y,l,this.props.color,this.props.background)):c(0,l,this.props.color,this.props.background)}else c(0,l,this.props.color,this.props.background)
return this}}]),n}()
e.default=n}),define("wave/lib/canvas-ui",["exports"],function(e){var t
function o(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend((o(t={width:640,height:320,hZoom:1,visible:!0,duration:"auto",color:"#fff",background:"#333",buffer:null},"buffer",Ember.computed.alias("editor.buffer")),o(t,"init",function(){this._super.apply(this,arguments),this.initCanvas()}),o(t,"_duration",Ember.computed.alias("editor._duration")),o(t,"displayDuration",Ember.computed.alias("editor.displayDuration")),o(t,"initCanvas",function(){var e=document.createElement("canvas"),t=e.getContext("2d")
t.imageSmoothingEnabled=!1,this.setProperties({canvas:e,context:t}),this.clearCanvas()}),o(t,"clearCanvas",function(){var e=this.getProperties("canvas","width","height"),t=e.canvas,o=e.width,r=e.height
t.width=o,t.height=r}),t))}),define("wave/lib/eventMixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={$on:function(e,t,o){return this._events=this._events||{},(this._events[e]||(this._events[e]=[])).push({callback:t,ctxArg:o,context:o||this}),this},$off:function(e,t,o){var r=this,i=void 0,n=void 0,a=void 0,s=void 0
if(!this._events||!this._events[e])return this
e||t||o||(this._events={})
var l=this._events[e]
if(l){if(s=[],t&&o)for(i=0,n=l.length;i<n;i++)a=l[i],t!==a.callback&&o!==a.ctxArg&&s.push(l[i])
else if(t)for(i=0,n=l.length;i<n;i++)a=l[i],t!==a.callback&&s.push(l[i])
else if(o)for(i=0,n=l.length;i<n;i++)a=l[i],o!==a.ctxArg&&s.push(l[i])
this._events[e]=s}else(o||t)&&Object.keys(this._events).forEach(function(e){r.$off(e,t,o)})
return this._events[e].length||delete this._events[e],this},$trigger:function(e){if(!this._events||!this._events[e])return this
var t,o,r=void 0,i=void 0
for(o=this._events[e],t=[].splice.call(arguments,1),r=o.length-1;r>=0;r--)(i=o[r]).callback.apply(i.context,t)
return this},$triggerDeferred:function(e){var t=this
this._changeBatchTimers=this._changeBatchTimers||{},null==this._changeBatchTimers[e]&&(this._changeBatchTimers[e]=setTimeout(function(){t.$trigger(e),t._changeBatchTimers[e]=null},50))}}}),define("wave/lib/line-marker",["exports","wave/lib/canvas-ui"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({background:"#999",color:"#aaa",width:2,height:Ember.computed.alias("editor.height"),renderCanvas:Ember.computed("width","height",function(){return this.render(),this.get("canvas")}),render:function(){var e=this.get("context"),t=(this.get("width"),this.get("height"))
return e.fillStyle=this.get("background"),e.strokeStyle=this.get("color"),e.beginPath(),e.strokeRect(0,0,1,t),this}})}),define("wave/lib/loop-marker",["exports","wave/lib/canvas-ui"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({color:"rgba(228, 157, 15, 0.7)",width:Ember.computed.alias("canvas.width"),height:Ember.computed("editor.height",function(){return 15}),renderCanvas:Ember.computed("width","height",function(){return this.render(),this.get("canvas")}),render:function(){var e=this.getProperties("context","color","width","height"),t=e.context,o=e.color,r=e.width,i=e.height
this.clearCanvas(),t.fillStyle=o,t.fillRect(0,0,r,i)}})}),define("wave/lib/ruler-object",["exports","wave/lib/canvas-ui"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({vZoom:1,background:Ember.computed.alias("editor.background"),color:"#222",unit:"s",duration:"auto",height:35,width:Ember.computed.alias("editor.width"),hZoom:Ember.computed.alias("editor.hZoom"),offset:Ember.computed.alias("editor.offset"),quantize:Ember.computed.alias("editor.quantize"),_interval:Ember.computed("hZoom","quantize",function(){var e=this.getProperties("hZoom","quantize"),t=e.hZoom,o=e.quantize,r=this.quantizeRuler(t)
return Math.max(o/10,r)}),renderCanvas:Ember.computed("height","width","background","color","displayDuration","unit","offset","_interval",function(){return this.render(),this.get("canvas")}),quantizeRuler:function(e){return.4/(1<<Math.floor(e).toString(2).length-1)},render:function(){var e=this.getProperties("context","height","width","background","color","displayDuration","unit","offset","_interval"),t=e.context,o=e.height,r=e.width,i=e.background,n=e.color,a=e.displayDuration,s=e.unit,l=e.offset,u=e._interval,p=function(e){return e<=1e-5?5:e<=1e-4?4:e<=.001?3:2}(u),h=1/(a/r)*u,d=r/h
t.fillStyle=i,t.fillRect(0,0,r,o),t.strokeStyle=t.fillStyle=n,t.lineWidth=.5
for(var f=-l/u%5*h,c=0;c<d+5;c++){var m=c%5==0
t.beginPath(),t.moveTo(f,0),t.lineTo(f,m?o:.3*o),t.stroke(),m&&(t.font="12px Arial",t.fillText((l+f/h*u).toFixed(p)+s,f+5,30)),f+=h}}})}),define("wave/lib/sample-editor-view",["exports","wave/lib/canvas-ui","wave/lib/waveform-object","wave/lib/ruler-object","wave/lib/line-marker","wave/lib/loop-marker"],function(e,t,o,r,i,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({classNames:["SampleEditorView"],pixelRatio:Ember.computed("width","height",function(){var e=this.element.getBoundingClientRect()
return{x:this.get("width")/e.width,y:this.get("height")/e.height}}),init:function(){this._super.apply(this,arguments)
o.default.create({editor:this}),r.default.create({editor:this}),i.default.create({editor:this}),i.default.create({editor:this,visible:!1}),n.default.create({editor:this,visible:!0}),i.default.create({editor:this,visible:!0}),i.default.create({editor:this,dir:-1,visible:!0})},render:function(){this.get("context")},_timeToPixel:function(e){if(0===(e-=this.get("offset"))||0===this.get("displayDuration"))return 1
var t=e/this.get("displayDuration")*this.get("width")
return Math.max(1,Math.round(t))},_getLoopRect:function(){return{x1:this._timeToPixel(this.get("loopStart")),y1:20,x2:this._timeToPixel(this.get("loopEnd")),y2:this.get("height")-20}},_hitTest:function(e){if(e.y<this.get("ruler.height")){if(this.get("loop")){var t=this._getLoopRect()
if(e.y>=t.y1&&e.y<t.y2){if(Math.abs(e.x-t.x1)<5)return this.get("loopStartMarker")
if(Math.abs(e.x-t.x2)<5)return this.get("loopEndMarker")
if(e.x>=t.x1&&e.x<t.x2)return this.get("loopLengthMarker")}}if(e.x)return this.ruler}return this.waveForm},_updateCursor:function(e,t){e===this.ruler?this.element.style.cursor="pointer":e===this.loopStartMarker?this.element.style.cursor="e-resize":e===this.loopEndMarker?this.element.style.cursor="w-resize":e===this.loopLengthMarker?this.element.style.cursor="move":e===this.waveForm&&t.altKey?this.element.style.cursor="zoom-in":this.element.style.cursor="auto"},_setupUI:function(){var e=this,t=!1,o=0,r=0,i=null,n=!1,a={x:0,y:0},s=0,l=function(t){var o=e.element.getBoundingClientRect(),r=e.get("pixelRatio")
return{rect:o,x:(t.pageX-o.left)*r.x,y:(t.pageY-o.top)*r.y,movementX:t.movementX?t.movementX*r.x:0,movementY:t.movementY?t.movementY*r.y:0}},u=function(t){var o=t.x,r=t.y
if(!e.get("quantize"))return{x:o,y:r}
var i=e.get("offset")/e.get("displayDuration")*e.get("width"),n=e.get("quantize")/e.get("displayDuration")*e.get("width")
return o+=i,o=Math.round(o/n)*n,{x:o-=i,y:r}}
this.canvas.addEventListener("mousedown",function(p){t=!0,o=null,r=0,n=!1
var h=l(p)
i=e._hitTest(h),e._updateCursor(i,p),i===e.waveForm&&(p.altKey||(n=!0,e.set("zoomMarker.position",h.x),e.set("zoomMarker.visible",!0),e.element.requestPointerLock())),n||(h=u(h)),s=e._pixelToTime(h.x)+e.get("offset"),!n&&e.set("selectEnd",e.set("selectStart",s)),a=h}),document.addEventListener("mouseup",function(){t=!1,n&&(e.set("zoomMarker.visible",!1),document.exitPointerLock(),n=!1)}),document.addEventListener("mousemove",function(p){if(t){var h=l(p),d=h.x,f=h.y,c=h.movementX,m=h.movementY,v=h.rect,g={x:d,y:f}
n||(g.x=Math.max(0,Math.min(e.get("width"),g.x)),g=u(g),i===e.ruler&&e.updateStartPos(g.x))
var b=(n&&void 0!==c?c:g.x-a.x)/v.width,y=(n&&void 0!==m?m:g.y-a.y)/v.height,w=e._pixelToTime(g.x)+e.get("offset"),x=e._pixelToTime(b)*e.get("width")/e.pixelRatio.x
if(Object.assign(a,g),n){null===o&&(o=g.y),o=g.y,r+=Math.abs(y)
var _=Math.max(1,e.get("hZoom")+y*e.get("hZoom"))
if(r>e.get("uiZoomStickiness")){var k=_-e.get("hZoom")
if(0!==k&&_>=.5){var M=k/e.get("hZoom"),E=g.x/(v.width*e.pixelRatio.x)
e.set("hZoom",_),e.offset+=M*E*e.displayDuration}}e.decrementValue("offset",10*b/_)}else i===e.get("waveForm")?w<s?e.updateSelection(e.get("selectStart")+x,s):e.updateSelection(s,e.get("selectEnd")+x):i===e.ruler?g.x>=0&&g.x<v.width?e.updateStartPos(g.x):g.x<0?e.set("offset",Math.max(0,e.get("offset")-Math.abs(.1*g.x))):e.set("offset",Math.min(e.duration,e.get("offset")+.1*(g.x-v.width))):i===e.get("loopLengthMarker")?e.updateLoopPos(e.get("loopStart")+x,e.get("loopEnd")+x):i===e.get("loopStartMarker")?w<=e.get("loopEnd")?e.updateLoopPos(e.get("loopStart")+x,e.get("loopEnd")):e.updateLoopPos(e.get("loopEnd"),e.get("loopEnd")):i===e.get("loopEndMarker")&&(w>=e.get("loopStart")?e.updateLoopPos(e.get("loopStart"),e.get("loopEnd")+x):e.updateLoopPos(e.get("loopStart"),e.get("loopStart")))}else e._updateCursor(e._hitTest(l(p)),p)})},didInsertElement:function(){this._super.apply(this,arguments),this._setupUI(),this.render()}})}),define("wave/lib/waveform-object",["exports","wave/lib/canvas-ui"],function(e,t){function o(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4]
arguments[5]
r=Math.max(1,r),o=Math.min(e.length,o),o=Math.min(t+100,o)
for(var n=0,a=t;a<o;a+=r)n+=i?Math.abs(e[a]):e[a]
return n/(o-t)*r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({width:Ember.computed.alias("editor.width"),height:Ember.computed.alias("editor.height"),hZoom:Ember.computed.alias("editor.hZoom"),vZoom:Ember.computed.alias("editor.vZoom"),channel:Ember.computed.alias("editor.channel"),resolution:Ember.computed.alias("editor.resolution"),offset:Ember.computed.alias("editor.offset"),color:Ember.computed.alias("editor.color"),background:Ember.computed.alias("editor.background"),selectColor:Ember.computed.alias("editor.selectColor"),selectBackground:Ember.computed.alias("editor.selectBackground"),selectStart:Ember.computed.alias("editor.selectStart"),selectEnd:Ember.computed.alias("editor.selectEnd"),sampleRate:Ember.computed("buffer",function(){return this.get("buffer").sampleRate}),channelData:Ember.computed("buffer","channel",function(){var e=this.getProperties("buffer","channel"),t=e.buffer,o=e.channel
return t.getChannelData(o)}),renderCanvas:Ember.computed("channelData","background","color","width","height","hZoom","resolution","offset","sampleRate","selectStart","selectEnd",function(){return this.render(),this.get("canvas")}),render:function(){var e=this,t=this.get("channelData")
if(!t)return this
var r=this.getProperties("context","background","color","width","height","hZoom","resolution","offset","sampleRate","selectStart","selectEnd","selectColor","selectBackground","_duration"),i=r.context,n=r.background,a=r.color,s=r.width,l=r.height,u=r.hZoom,p=r.resolution,h=r.offset,d=r.sampleRate,f=r.selectStart,c=r.selectEnd,m=r.selectColor,v=r.selectBackground,g=r._duration,b=t.length/u,y=Math.min(s/p,b),w=b/y,x=s/y,_=l/2,k=h*d,M=w>x
i.fillStyle=n,i.fillRect(0,0,s,l),i.beginPath(),i.moveTo(0,_),i.lineTo(s,_),i.stroke(),i.moveTo(0,_)
var E=function(r,n,a,s){r=Math.max(0,Math.min(r,y)),n=Math.max(0,Math.min(n,y))
var u=0,p=[]
i.beginPath()
var h=r*x
if(s){var d=(n-r)*x
i.fillStyle=s,i.fillRect(h,0,d,l)}for(var f=r;f<n;f++){var c=Math.floor((f+1)*w+k)
if(M){var m=c>=0?o(t,u,c,1,!0):0
if(m>=0){var v=m*e.get("vZoom")*_
f===r&&i.moveTo(h,_-v),i.lineTo(h,_-v),p.push(h,v)}}else{var g=(c>=0?o(t,u,c,1,!1):0)*e.get("vZoom")*_
f===r&&i.moveTo(0,_-g),i.lineTo(h,_-g)}h+=x,u=c}if(M){for(var b=p.length-1;b>0;b-=2){var E=p[b-1],P=p[b]
i.lineTo(E,_+P)}i.fillStyle=a,i.fill()}else i.strokeStyle=a,i.stroke()}
if(f!==c){var P=g/u/y,S=f-h,T=Math.floor(S/P),O=c-h,j=Math.floor(O/P)
j>0&&T<y?(T>0&&E(0,T,a,n),E(Math.max(0,T),Math.min(y,j),m,v),j<y&&E(j,y,a,n)):E(0,y,a,n)}else E(0,y,a,n)}})}),define("wave/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default})
define("wave/router",["exports","wave/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var o=Ember.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL})
o.map(function(){this.route("sample-editor"),this.route("editor"),this.route("other")}),e.default=o}),define("wave/routes/editor",["exports","wave/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({audio:Ember.inject.service(),audioContext:Ember.computed.alias("audio.audioContext"),getBuffer:function(){var e=this.get("audioContext")
return new Promise(function(o,r){fetch(t.default.rootURL+"dub.wav").then(function(e){return e.arrayBuffer()}).then(function(t){e.decodeAudioData(t,function(e){return o(e)},r)})})},model:function(){return this.getBuffer()}})}),define("wave/routes/other",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({})}),define("wave/routes/sample-editor",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({})}),define("wave/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("wave/services/audio",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Service.extend({init:function(){this._super.apply(this,arguments)
var e=window.AudioContext||window.webkitAudioContext
this.set("audioContext",new e)}})}),define("wave/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"g/FNYtDW",block:'{"symbols":[],"statements":[[6,"div"],[8],[0,"\\n  "],[4,"link-to",["editor"],null,{"statements":[[0,"editor"]],"parameters":[]},null],[0,"\\n  "],[4,"link-to",["sample-editor"],null,{"statements":[[0,"sample-editor"]],"parameters":[]},null],[0,"\\n  "],[4,"link-to",["other"],null,{"statements":[[0,"Peaks.js"]],"parameters":[]},null],[0,"\\n"],[9],[0,"\\n\\n"],[1,[20,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/application.hbs"}})}),define("wave/templates/components/peaks-display",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"wpXKakpL",block:'{"symbols":["&default"],"statements":[[6,"div"],[10,"id","peaks-container"],[8],[9],[0,"\\n\\n"],[6,"button"],[3,"action",[[21,0,[]],[22,["zoomOut"]]]],[8],[0,"-"],[9],[0,"\\n"],[6,"button"],[3,"action",[[21,0,[]],[22,["zoomIn"]]]],[8],[0,"+"],[9],[0,"\\n\\n"],[6,"button"],[3,"action",[[21,0,[]],[22,["addSegment"]]]],[8],[0,"Add Segment"],[9],[0,"\\n"],[6,"button"],[3,"action",[[21,0,[]],[22,["removeAllSegments"]]]],[8],[0,"Remove All Segments"],[9],[0,"\\n\\n"],[6,"button"],[3,"action",[[21,0,[]],[22,["playSegment"]]]],[8],[0,"Play Segment"],[9],[0,"\\n"],[6,"button"],[3,"action",[[21,0,[]],[22,["extractSegment"]]]],[8],[0,"Extract Segment"],[9],[0,"\\n\\n"],[6,"div"],[10,"class","player-container"],[8],[9],[0,"\\n\\n"],[13,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/components/peaks-display.hbs"}})}),define("wave/templates/components/sample-editor-view",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"BwLpwn4C",block:'{"symbols":["&default"],"statements":[[13,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/components/sample-editor-view.hbs"}})}),define("wave/templates/components/sample-editor",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"c00RwTLJ",block:'{"symbols":["&default"],"statements":[[6,"div"],[8],[0,"\\n  "],[6,"button"],[3,"action",[[21,0,[]],[22,["play"]]]],[8],[0,"Play"],[9],[0,"\\n  "],[6,"button"],[3,"action",[[21,0,[]],[22,["stop"]]]],[8],[0,"Stop"],[9],[0,"\\n"],[9],[0,"\\n"],[6,"div"],[8],[0,"\\n  "],[6,"div"],[8],[0,"Start: "],[1,[26,"input",null,[["type","value"],["number",[22,["editor","props","loopStart"]]]]],false],[9],[0,"\\n  "],[6,"div"],[8],[0,"Length: "],[1,[26,"input",null,[["type","value"],["number",[22,["loopLength"]]]]],false],[9],[0,"\\n  "],[6,"div"],[8],[0,"End: "],[1,[26,"input",null,[["type","value"],["number",[22,["editor","props","loopEnd"]]]]],false],[9],[0,"\\n"],[9],[0,"\\n"],[13,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/components/sample-editor.hbs"}})}),define("wave/templates/components/waveform-display",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Ml40w3GY",block:'{"symbols":["&default"],"statements":[[13,1]],"hasEval":false}',meta:{moduleName:"wave/templates/components/waveform-display.hbs"}})}),define("wave/templates/editor",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"qzgeeO+C",block:'{"symbols":[],"statements":[[6,"div"],[8],[0,"\\n  "],[6,"button"],[3,"action",[[21,0,[]],[22,["play"]]]],[8],[0,"Play"],[9],[0,"\\n  "],[6,"button"],[3,"action",[[21,0,[]],[22,["stop"]]]],[8],[0,"Stop"],[9],[0,"\\n"],[9],[0,"\\n"],[6,"div"],[8],[0,"\\n  "],[6,"div"],[8],[0,"Start: "],[1,[26,"input",null,[["type","value"],["number",[22,["_loopStart"]]]]],false],[9],[0,"\\n  "],[6,"div"],[8],[0,"Length: "],[1,[26,"input",null,[["type","value"],["number",[22,["loopLength"]]]]],false],[9],[0,"\\n  "],[6,"div"],[8],[0,"End: "],[1,[26,"input",null,[["type","value"],["number",[22,["_loopEnd"]]]]],false],[9],[0,"\\n  "],[6,"div"],[8],[0,"Zoom: "],[1,[26,"input",null,[["type","value","min"],["number",[22,["hZoom"]],1]]],false],[9],[0,"\\n"],[9],[0,"\\n\\n"],[4,"if",[[22,["model","length"]]],null,{"statements":[[0,"  "],[1,[26,"sample-editor-view",null,[["buffer","color","background","width","height","loopStart","loopEnd","hZoom","highRes"],[[22,["model"]],"#62a5d8","#eee",1280,640,[22,["loopStart"]],[22,["loopEnd"]],[22,["hZoom"]],true]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[1,[20,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/editor.hbs"}})}),define("wave/templates/other",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Tn09gxtO",block:'{"symbols":[],"statements":[[1,[20,"peaks-display"],false],[0,"\\n"],[1,[20,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/other.hbs"}})}),define("wave/templates/sample-editor",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1o+83c6g",block:'{"symbols":[],"statements":[[1,[20,"sample-editor"],false],[0,"\\n"],[1,[20,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"wave/templates/sample-editor.hbs"}})}),define("wave/config/environment",[],function(){try{var e="wave/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),o={default:JSON.parse(unescape(t))}
return Object.defineProperty(o,"__esModule",{value:!0}),o}catch(t){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("wave/app").default.create({name:"wave",version:"0.0.0+a1a74e03"})
